<!-- Modern Modal -->
<div class="modal" [class.modal-open]="isOpen" *ngIf="isOpen">
  <!-- Backdrop -->
  <div class="modal-backdrop bg-black/50 backdrop-blur-sm" (click)="closeModal()"></div>

  <!-- Modal Content -->
  <div class="modal-box max-w-[calc(100vw-2rem)] sm:max-w-md lg:max-w-lg bg-base-100 rounded-xl sm:rounded-2xl shadow-strong p-0 overflow-hidden animate-slide-up border border-base-300/20">
    <!-- Header -->
    <div class="bg-gradient-navy px-4 py-4 sm:px-6 sm:py-5 flex items-center justify-between">
      <h3 class="font-bold text-base sm:text-lg text-white">{{ title }}</h3>
      <button class="btn btn-ghost btn-xs sm:btn-sm btn-circle text-white hover:bg-white/10" (click)="closeModal()">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 sm:w-5 sm:h-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Content -->
    <div class="p-4 sm:p-6">
      <!-- Evacuation Center Details -->
      <div *ngIf="type === 'evacuation' && data" class="space-y-4">
        <div class="flex items-start gap-3 p-3 rounded-xl bg-base-200/50">
          <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 text-primary">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
            </svg>
          </div>
          <div class="flex-1">
            <div class="text-xs text-base-content/60 mb-1">Location</div>
            <div class="font-semibold text-base-content">{{ data.name }}</div>
          </div>
        </div>

        <div class="flex items-start gap-3 p-3 rounded-xl bg-base-200/50">
          <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 text-primary">
              <path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z" />
            </svg>
          </div>
          <div class="flex-1">
            <div class="text-xs text-base-content/60 mb-1">Capacity</div>
            <div class="font-semibold text-base-content">{{ data.capacity }} people</div>
          </div>
        </div>

        <div class="flex items-center justify-between p-3 rounded-xl bg-base-200/50">
          <span class="text-sm text-base-content/70">Status</span>
          <div class="badge badge-lg" [class.badge-success]="data.status === 'available'" [class.badge-warning]="data.status === 'limited'">
            {{ data.status | uppercase }}
          </div>
        </div>

        <div class="p-3 rounded-xl bg-base-200/50">
          <div class="text-xs text-base-content/60 mb-1">Coordinates</div>
          <div class="text-sm font-mono text-base-content/80">{{ data.lat }}, {{ data.lng }}</div>
        </div>
      </div>

      <!-- Emergency Details -->
      <div *ngIf="type === 'emergency' && data" class="space-y-4">
        <div class="flex items-start gap-3 p-3 rounded-xl bg-base-200/50">
          <div class="w-10 h-10 rounded-lg bg-error/10 flex items-center justify-center flex-shrink-0">
            <span class="text-2xl">{{ data.icon }}</span>
          </div>
          <div class="flex-1">
            <div class="text-xs text-base-content/60 mb-1">Emergency Type</div>
            <div class="font-semibold text-base-content">{{ data.type | titlecase }}</div>
          </div>
        </div>

        <div class="flex items-start gap-3 p-3 rounded-xl bg-base-200/50">
          <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 text-primary">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
            </svg>
          </div>
          <div class="flex-1">
            <div class="text-xs text-base-content/60 mb-1">Location</div>
            <div class="font-semibold text-base-content">{{ data.location }}</div>
          </div>
        </div>

        <div class="flex items-center justify-between p-3 rounded-xl bg-base-200/50">
          <span class="text-sm text-base-content/70">Severity Level</span>
          <div class="badge badge-lg"
               [class.badge-error]="data.severity === 'high'"
               [class.badge-warning]="data.severity === 'medium'"
               [class.badge-primary]="data.severity === 'low'">
            {{ data.severity | uppercase }}
          </div>
        </div>

        <div class="p-3 rounded-xl bg-base-200/50">
          <div class="text-xs text-base-content/60 mb-1">Reported</div>
          <div class="text-sm text-base-content/80">{{ data.timestamp | date:'medium' }}</div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="px-4 py-3 sm:px-6 sm:py-4 bg-base-200/30 border-t border-base-300/20 flex flex-col sm:flex-row gap-2 sm:gap-3 justify-end">
      <button class="btn btn-ghost btn-sm sm:btn-md rounded-lg order-2 sm:order-1" (click)="closeModal()">Close</button>
      <button class="btn btn-primary btn-sm sm:btn-md rounded-lg shadow-soft order-1 sm:order-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-3.5 h-3.5 sm:w-4 sm:h-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z" />
        </svg>
        <span class="text-xs sm:text-sm">Get Directions</span>
      </button>
    </div>
  </div>
</div>
