<!-- Loading/Splash Screen -->
<div
  *ngIf="isLoading"
  class="fixed inset-0 z-[9999] bg-primary flex items-center justify-center animate-fade-in"
>
  <div class="flex flex-col items-center gap-4 sm:gap-8 px-6 py-8">
    <!-- Logo -->
    <div class="relative">
      <div class="w-24 h-24 xs:w-28 xs:h-28 sm:w-40 sm:h-40 lg:w-48 lg:h-48 animate-pulse-slow">
        <img
          src="sinag-logo.png"
          alt="SINAG Logo"
          class="w-full h-full object-contain drop-shadow-2xl"
        />
      </div>
      <!-- Glow effect -->
      <div
        class="absolute inset-0 w-24 h-24 xs:w-28 xs:h-28 sm:w-40 sm:h-40 lg:w-48 lg:h-48 bg-secondary/30 rounded-full blur-3xl animate-pulse"
      ></div>
    </div>

    <!-- App Name -->
    <div class="text-center space-y-2 sm:space-y-3">
      <h1
        class="text-3xl xs:text-4xl sm:text-5xl lg:text-6xl font-extrabold text-white tracking-wide animate-slide-up"
      >
        Project SINAG
      </h1>
      <p
        class="text-sm xs:text-base sm:text-lg lg:text-xl text-white/80 font-medium tracking-wider animate-slide-up"
        style="animation-delay: 0.2s"
      >
        Smart Integrated Network Alert Guide
      </p>
    </div>

    <!-- Loading Spinner -->
    <div class="flex items-center gap-3 animate-slide-up" style="animation-delay: 0.4s">
      <div
        class="w-2 h-2 bg-secondary rounded-full animate-bounce"
        style="animation-delay: 0s"
      ></div>
      <div
        class="w-2 h-2 bg-secondary rounded-full animate-bounce"
        style="animation-delay: 0.2s"
      ></div>
      <div
        class="w-2 h-2 bg-secondary rounded-full animate-bounce"
        style="animation-delay: 0.4s"
      ></div>
    </div>

    <!-- Tagline -->
    <p
      class="text-xs xs:text-sm sm:text-base text-white/60 font-medium animate-slide-up"
      style="animation-delay: 0.6s"
    >
      Initializing disaster response system...
    </p>
  </div>
</div>

<!-- Main App Content -->
<div
  *ngIf="!isLoading"
  class="flex flex-col min-[500px]:flex-row h-screen overflow-hidden animate-fade-in"
>
  <!-- Side Navbar - Fixed at bottom on mobile, sidebar on left for desktop -->
  <div
    class="fixed bottom-0 left-0 right-0 w-full h-16 min-[500px]:relative min-[500px]:h-auto min-[500px]:w-20 lg:w-28 flex-shrink-0 z-50"
  >
    <app-navbar [activeView]="currentView" (viewChange)="onViewChange($event)"></app-navbar>
  </div>
  <!-- Main Map View (Full height on mobile, remaining width on desktop) -->
  <div class="flex-1 h-full pb-16 min-[500px]:pb-0">
    <app-weather-map *ngIf="currentView === 'weather'"></app-weather-map>
    <app-emergencies-map *ngIf="currentView === 'emergencies'"></app-emergencies-map>
  </div>
</div>
<router-outlet />
